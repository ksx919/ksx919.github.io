{"version":3,"file":"js/225.b80eb5e2.js","mappings":"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","sources":["webpack://aihub/./src/views/NegotiatorSimulator.vue","webpack://aihub/./src/views/NegotiatorSimulator.vue?0e0f"],"sourcesContent":["<template>\n  <div class=\"negotiator-simulator\">\n    <div class=\"intro-section\" v-if=\"!gameStarted\">\n      <div class=\"intro-header\">\n      <h2 class=\"sim-title\">谈判专家模拟器</h2>\n        <div class=\"features\">\n          <span class=\"feature-tag\">心理博弈</span>\n          <span class=\"feature-tag\">危机处理</span>\n          <span class=\"feature-tag\">话术技巧</span>\n          <span class=\"feature-tag\">人质解救</span>\n        </div>\n      </div>\n      <div class=\"sim-desc\">你将扮演警方谈判专家，与AI扮演的劫持犯展开10轮心理博弈，通过话术提升信任值、挖掘诉求、化解危机，最终解救人质！</div>\n      <div class=\"intro-card\">\n        <ul>\n          <li><span class=\"li-dot\"></span>目标：10轮内将信任值提升至100，解救人质</li>\n          <li><span class=\"li-dot\"></span>信任值：初始20/100，≥60可合作，≤30有威胁</li>\n          <li><span class=\"li-dot\"></span>每轮限时60秒，超时扣分</li>\n          <li><span class=\"li-dot\"></span>可用指令：<span class=\"cmd\">/hint</span>（获取线索），<span class=\"cmd\">/score</span>（查看分数）</li>\n          <li><span class=\"li-dot\"></span>高压事件：第3/6/9轮自动触发危机</li>\n          <li><span class=\"li-dot\"></span>多结局分支，体验真实谈判挑战！</li>\n        </ul>\n      </div>\n      <div class=\"start-btn-row\">\n        <button class=\"start-btn\" @click=\"startGame\">开始游戏</button>\n      </div>\n    </div>\n    <div v-else class=\"game-container\">\n      <div class=\"game-header\" :class=\"{ 'collapsed': isHeaderCollapsed }\">\n        <div class=\"header-content\">\n          <h1>谈判专家模拟器</h1>\n          <div class=\"features\">\n            <span class=\"feature-tag\">心理博弈</span>\n            <span class=\"feature-tag\">危机处理</span>\n            <span class=\"feature-tag\">话术技巧</span>\n            <span class=\"feature-tag\">人质解救</span>\n          </div>\n        </div>\n        <button class=\"collapse-btn\" @click=\"toggleHeader\" :title=\"isHeaderCollapsed ? '展开标题' : '收起标题'\">\n          {{ isHeaderCollapsed ? '▼' : '▲' }}\n        </button>\n      </div>\n      \n      <!-- 游戏状态栏 -->\n      <div class=\"game-status\">\n        <div class=\"trust-value\">\n          信任值:\n          <span :class=\"getTrustLevelClass()\">\n            <span class=\"trust-num\">{{ trustValue }}</span>/100\n          </span>\n          <div class=\"trust-bar-bg\">\n            <div class=\"trust-bar\" :style=\"{width: trustValue + '%'}\"></div>\n          </div>\n        </div>\n        <div class=\"timer\">\n          剩余时间:\n          <span :class=\"{ 'time-warning': timeLeft < 10 }\">\n            <span class=\"timer-num\">{{ timeLeft }}</span>s\n          </span>\n        </div>\n        <div class=\"round-info\">\n          剩余轮数:\n          <span class=\"round-num\">{{ roundsLeft }}</span>\n        </div>\n      </div>\n\n      <!-- 游戏对话区域 -->\n      <div class=\"game-dialog\">\n        <div class=\"messages\">\n          <div v-for=\"(msg, index) in messages\" :key=\"index\" :class=\"['message', msg.type]\">\n            <div class=\"bubble-wrapper\" :class=\"msg.type\">\n              <div class=\"bubble-triangle\" :class=\"msg.type\"></div>\n              <div class=\"message-content\">\n                <div v-if=\"msg.type === 'ai'\">\n                  <span class=\"status-tag\">{{ getAiStatus(msg.content) }}</span>\n                  <div class=\"message-text\">{{ getAiMessage(msg.content) }}</div>\n                  <div class=\"score-info\">{{ getScoreInfo(msg.content) }}</div>\n                </div>\n                <div v-else>\n                  {{ msg.content }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 用户输入区域 -->\n      <div class=\"input-area\">\n        <textarea\n          v-model=\"userInput\"\n          @input=\"autoResizeInput\"\n          @keydown=\"handleKeydown\"\n          :disabled=\"waitingForAI || timeLeft <= 0\"\n          placeholder=\"输入消息或指令 (/hint, /score)...\"\n          class=\"message-input textarea-auto\"\n          rows=\"1\"\n          style=\"resize:none;overflow:hidden;\"\n        />\n        <button \n          @click=\"sendMessage()\" \n          :disabled=\"waitingForAI || timeLeft <= 0\" \n          class=\"send-btn\"\n        >\n          发送\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'NegotiatorSimulator',\n  data() {\n    return {\n      gameStarted: false,\n      trustValue: 20,\n      timeLeft: 60,\n      roundsLeft: 10,\n      messages: [],\n      userInput: '',\n      waitingForAI: false,\n      timer: null,\n      chatId: 'game_' + Date.now(),\n      // 初始化 sessionMessages, sessionLoading 等对象\n      sessionMessages: {},\n      sessionLoading: {},\n      currentChatId: '', // 添加 currentChatId 的初始化\n      isHeaderCollapsed: false\n    }\n  },\n  methods: {\n    startGame() {\n      this.gameStarted = true;\n      this.currentChatId = this.chatId; // 设置当前chatId\n      this.sendMessage('开始游戏');\n    },\n    \n    toggleHeader() {\n      this.isHeaderCollapsed = !this.isHeaderCollapsed;\n    },\n    \n    async sendMessage(event) {\n      // 如果是键盘事件，阻止默认行为\n      let message = '';\n      // 兼容直接传字符串的情况\n      if (typeof event === 'string') {\n        message = event;\n      } else {\n        message = this.userInput;\n        if (event && event instanceof KeyboardEvent) {\n          event.preventDefault();\n          if (event.type === 'keyup' && event.key !== 'Enter') {\n            return; // 如果不是回车键，直接返回\n          }\n        }\n      }\n\n      if (!message.trim() || this.waitingForAI) return;\n\n      // 正确添加用户消息\n      this.messages.push({ type: 'user', content: message });\n      this.userInput = '';\n      this.waitingForAI = true;\n\n      // 暂停计时器\n      if (this.timer) clearInterval(this.timer);\n\n      // 发送消息后滚动到底部\n      this.$nextTick(() => {\n        this.scrollToBottom();\n      });\n\n      try {\n        // 构建请求URL（保留原有axios参数处理）\n        const url = axios.getUri({ \n          url: '/ai/game', \n          params: { prompt: message, chatId: this.chatId }\n        });\n\n        // 使用fetch获取流式响应\n        const response = await fetch(url);\n        if (!response.ok) { // 检查响应状态\n          throw new Error('请求失败');\n        }\n        if (!response.body) throw new Error('无流式响应');\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder('utf-8');\n        let aiText = '';\n\n        // 正确添加AI消息并获取其索引\n        this.messages.push({ type: 'ai', content: '' });\n        const aiMsgIdx = this.messages.length - 1;\n\n        // 流式处理（修复eslint错误）\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          // 直接解码字符串片段（Flux特性）\n          const textChunk = decoder.decode(value, { stream: true });\n          aiText += textChunk;\n\n          // 实时更新AI消息文本\n          this.messages[aiMsgIdx].content = aiText;\n\n          // 更新会话消息\n          this.sessionMessages[this.chatId] = [...this.messages];\n\n          // AI流式响应时滚动到底部\n          this.$nextTick(() => {\n            this.scrollToBottom();\n          });\n        }\n\n        // 流式处理结束后，自动解析信任值和剩余轮数\n        this.parseAIResponse(aiText);\n\n        // 最终更新会话列表\n        await this.fetchChatList();\n      } catch (e) {\n        // 正确处理错误消息\n        this.messages.push({ \n          type: 'ai', \n          content: `[AI异常] ${e.message || '未知错误'}` \n        });\n        this.sessionMessages[this.chatId] = [...this.messages];\n      } finally {\n        // 清理加载状态\n        this.sessionLoading[this.chatId] = false;\n        this.waitingForAI = false;\n        this.resetTimer(); // 重新开始计时器\n      }\n    },\n    \n    parseAIResponse(response) {\n      // 解析信任值\n      const trustMatch = response.match(/信任值[:：]\\s*(\\d+)\\/100/);\n      if (trustMatch) {\n        this.trustValue = parseInt(trustMatch[1]);\n      }\n      // 解析剩余轮数\n      const roundMatch = response.match(/剩余轮数[:：]\\s*(\\d+)/);\n      if (roundMatch) {\n        this.roundsLeft = parseInt(roundMatch[1]);\n      }\n      // 判断胜利\n      if (this.trustValue >= 100) {\n        this.$nextTick(() => {\n          if (window.confirm('恭喜你，信任值已达100，游戏胜利！\\n点击确定返回首页。')) {\n            this.resetGame();\n          }\n        });\n      }\n    },\n    \n    getTrustLevelClass() {\n      if (this.trustValue <= 30) return 'trust-low';\n      if (this.trustValue >= 60) return 'trust-high';\n      return 'trust-medium';\n    },\n    \n    getAiStatus(content) {\n      const match = content.match(/\\(([^)]+)\\)/);\n      return match ? match[1] : '';\n    },\n    \n    getAiMessage(content) {\n      return content.replace(/\\([^)]+\\)/, '').split('\\n')[0].trim();\n    },\n    \n    getScoreInfo(content) {\n      const lines = content.split('\\n');\n      return lines.slice(1).join('\\n');\n    },\n    \n    resetTimer() {\n      if (this.timer) clearInterval(this.timer);\n      this.timeLeft = 60;\n      this.startTimer();\n    },\n    \n    startTimer() {\n      this.timer = setInterval(() => {\n        this.timeLeft--;\n        if (this.timeLeft <= 0) {\n          clearInterval(this.timer);\n          // 时间到自动发送超时消息\n          this.handleTimeout();\n        }\n      }, 1000);\n    },\n    \n    handleTimeout() {\n      this.messages.push({ type: 'ai', content: '(超时)' });\n      this.timeLeft = 0;\n      this.sendMessage('(超时)');\n    },\n\n    // 添加 fetchChatList 方法\n    async fetchChatList() {\n      // 在这个模拟器中，我们不需要实际获取聊天列表，所以留空\n      // 这个方法只是为了解决 \"this.fetchChatList is not a function\" 错误\n      return Promise.resolve();\n    },\n    // 新增重置方法\n    resetGame() {\n      this.gameStarted = false;\n      this.trustValue = 20;\n      this.timeLeft = 60;\n      this.roundsLeft = 10;\n      this.messages = [];\n      this.userInput = '';\n      this.waitingForAI = false;\n      this.timer = null;\n      this.chatId = 'game_' + Date.now();\n      this.sessionMessages = {};\n      this.sessionLoading = {};\n      this.currentChatId = '';\n    },\n    handleKeydown(e) {\n      if (e.key === 'Enter') {\n        if (e.shiftKey) {\n          // Shift+Enter: 换行\n          return;\n        } else {\n          // Enter: 发送消息\n          e.preventDefault();\n          this.sendMessage();\n        }\n      }\n    },\n    autoResizeInput(e) {\n      const textarea = e.target;\n      textarea.style.height = 'auto';\n      textarea.style.height = textarea.scrollHeight + 'px';\n    },\n    // 滚动到底部方法\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const messagesEl = this.$el.querySelector('.messages');\n        if (messagesEl) {\n          messagesEl.scrollTop = messagesEl.scrollHeight;\n        }\n      });\n    }\n  },\n  \n  beforeUnmount() {\n    if (this.timer) clearInterval(this.timer);\n  }\n}\n</script>\n\n<style scoped>\n.negotiator-simulator {\n  text-align: center;\n  padding: 0;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n\nbody.dark .negotiator-simulator {\n  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);\n}\n\n.intro-section {\n  width: 100%;\n  max-width: 800px;\n  margin: 48px auto 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.intro-header {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.intro-header h2 {\n  margin: 0 0 10px 0;\n  color: #333;\n  font-size: 24px;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.features {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.feature-tag {\n  padding: 4px 12px;\n  background: #667eea;\n  color: white;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\nbody.dark .intro-header h2 {\n  color: #ecf0f1;\n}\n\nbody.dark .feature-tag {\n  background: #3498db;\n}\n\n.sim-title {\n  font-size: 2.1rem;\n  font-weight: bold;\n  color: #2c3e50;\n  letter-spacing: 2px;\n  margin-bottom: 12px;\n  text-shadow: 0 4px 18px rgba(255, 255, 255, 0.9), 0 2px 4px rgba(0, 0, 0, 0.1);\n  background: rgba(255, 255, 255, 0.15);\n  padding: 12px 24px;\n  border-radius: 16px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  display: inline-block;\n}\n\nbody.dark .sim-title {\n  color: #ecf0f1;\n  text-shadow: 0 4px 18px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(255, 255, 255, 0.1);\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n.sim-desc {\n  font-size: 1.05rem;\n  color: #2c3e50;\n  margin-bottom: 18px;\n  line-height: 1.7;\n  text-align: center;\n  font-weight: 600;\n  text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);\n  background: rgba(255, 255, 255, 0.1);\n  padding: 16px 20px;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\nbody.dark .sim-desc {\n  color: #ecf0f1;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  background: rgba(255, 255, 255, 0.05);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n.intro-card {\n  background: rgba(255,255,255,0.98);\n  backdrop-filter: blur(15px);\n  border-radius: 18px;\n  box-shadow: 0 8px 32px rgba(44,62,80,0.15);\n  padding: 18px 16px 12px 16px;\n  margin-bottom: 18px;\n  width: 100%;\n  max-width: 480px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\nbody.dark .intro-card {\n  background: rgba(44, 62, 80, 0.98);\n  box-shadow: 0 8px 32px rgba(0,0,0,0.4);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.intro-card ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  width: 100%;\n}\n.intro-card li {\n  font-size: 1rem;\n  color: #1a202c;\n  margin-bottom: 10px;\n  display: flex;\n  align-items: flex-start;\n  line-height: 1.6;\n  font-weight: 500;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);\n}\n\nbody.dark .intro-card li {\n  color: #f7fafc;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n}\n\n.li-dot {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  background: linear-gradient(135deg, #42b983 60%, #2563eb 100%);\n  border-radius: 50%;\n  margin-right: 12px;\n  margin-top: 7px;\n  flex-shrink: 0;\n  box-shadow: 0 1px 4px #e0eafc;\n}\n\nbody.dark .li-dot {\n  background: linear-gradient(135deg, #42b983 60%, #63b3ed 100%);\n  box-shadow: 0 1px 4px #1a2633;\n}\n\n.cmd {\n  color: #2563eb;\n  font-weight: bold;\n  background: #e0eafc;\n  border-radius: 6px;\n  padding: 1px 6px;\n  margin: 0 2px;\n  font-size: 1.02em;\n}\n\nbody.dark .cmd {\n  color: #63b3ed;\n  background: #2d3642;\n}\n\n.start-btn-row {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 0;\n}\n\n.start-btn {\n  padding: 12px 36px;\n  font-size: 1.08rem;\n  background: linear-gradient(90deg, #667eea 60%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 18px rgba(102, 126, 234, 0.3);\n  font-weight: bold;\n  letter-spacing: 2px;\n}\n.start-btn:hover {\n  background: linear-gradient(90deg, #5a6fd8 60%, #6a4c93 100%);\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);\n  transform: translateY(-2px) scale(1.04);\n}\n\nbody.dark .start-btn {\n  background: linear-gradient(90deg, #3498db 60%, #2980b9 100%);\n}\nbody.dark .start-btn:hover {\n  background: linear-gradient(90deg, #2980b9 60%, #1f5f8b 100%);\n}\n\n.game-container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 16px;\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);\n  backdrop-filter: blur(15px);\n  border-radius: 20px;\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);\n  transition: all 0.3s ease;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  height: calc(100vh - 100px);\n  display: flex;\n  flex-direction: column;\n}\n\nbody.dark .game-container {\n  background: linear-gradient(180deg, rgba(44, 62, 80, 0.9) 0%, rgba(52, 73, 94, 0.7) 100%);\n  box-shadow: 0 8px 32px rgba(52, 152, 219, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n}\n\n.game-header {\n  padding: 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  text-align: center;\n  transition: all 0.3s ease;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.game-header.collapsed {\n  padding: 5px 20px;\n  min-height: 10px;\n  max-height: 40px;\n}\n\n.header-content {\n  flex: 1;\n  text-align: center;\n  transition: all 0.3s ease;\n  overflow: hidden;\n  max-height: 200px;\n}\n\n.game-header.collapsed .header-content {\n  opacity: 0;\n  max-height: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.collapse-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  color: #667eea;\n  padding: 8px;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n}\n\n.collapse-btn:hover {\n  background: rgba(102, 126, 234, 0.1);\n  transform: translateY(-50%) scale(1.1);\n}\n\nbody.dark .collapse-btn {\n  color: #3498db;\n}\n\nbody.dark .collapse-btn:hover {\n  background: rgba(52, 152, 219, 0.2);\n}\n\n.game-header h1 {\n  margin: 0 0 10px 0;\n  color: #333;\n  font-size: 24px;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\nbody.dark .game-header {\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\nbody.dark .game-header h1 {\n  color: #ecf0f1;\n}\n\n.game-status {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n  border-radius: 16px;\n  margin-bottom: 16px;\n  font-weight: bold;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.08);\n  gap: 20px;\n  border: 1px solid rgba(102, 126, 234, 0.15);\n  backdrop-filter: blur(10px);\n  flex-shrink: 0;\n}\n\nbody.dark .game-status {\n  background: linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(52, 73, 94, 0.1) 100%);\n  box-shadow: 0 4px 16px rgba(52, 152, 219, 0.12);\n  border: 1px solid rgba(52, 152, 219, 0.15);\n}\n\n.trust-value {\n  min-width: 180px;\n  font-size: 1.1rem;\n  color: #2b6cb0;\n}\n\nbody.dark .trust-value {\n  color: #63b3ed;\n}\n\n.trust-num {\n  font-size: 1.6rem;\n  font-weight: bold;\n  color: #42b983;\n  margin: 0 2px;\n}\n.trust-bar-bg {\n  width: 120px;\n  height: 12px;\n  background: #e0eafc;\n  border-radius: 8px;\n  margin-top: 4px;\n  overflow: hidden;\n  display: inline-block;\n  vertical-align: middle;\n}\n\nbody.dark .trust-bar-bg {\n  background: #1a2633;\n}\n\n.trust-bar {\n  height: 100%;\n  background: linear-gradient(90deg, #42b983 60%, #2b6cb0 100%);\n  border-radius: 8px;\n  transition: width 0.4s;\n}\n\nbody.dark .trust-bar {\n  background: linear-gradient(90deg, #42b983 60%, #63b3ed 100%);\n}\n\n.timer {\n  font-size: 1.1rem;\n  color: #e67e22;\n}\n.timer-num {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #e67e22;\n  margin: 0 2px;\n}\n.time-warning {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\nbody.dark .timer {\n  color: #f39c12;\n}\nbody.dark .timer-num {\n  color: #f39c12;\n}\n\n.round-info {\n  font-size: 1.1rem;\n  color: #2b6cb0;\n}\n.round-num {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #2b6cb0;\n  margin: 0 2px;\n}\n\nbody.dark .round-info {\n  color: #63b3ed;\n}\nbody.dark .round-num {\n  color: #63b3ed;\n}\n\n.game-dialog {\n  flex: 1;\n  min-height: 200px;\n  max-height: none;\n  overflow-y: auto;\n  border: none;\n  border-radius: 16px;\n  margin-bottom: 16px;\n  padding: 16px;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.08);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\nbody.dark .game-dialog {\n  background: linear-gradient(135deg, rgba(44, 62, 80, 0.8) 0%, rgba(52, 73, 94, 0.6) 100%);\n  box-shadow: 0 4px 16px rgba(52, 152, 219, 0.12);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n}\n\n.messages {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.message {\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 0;\n  background: none;\n  box-shadow: none;\n  padding: 0;\n}\n\n.bubble-wrapper {\n  display: flex;\n  align-items: flex-end;\n  max-width: 80%;\n  position: relative;\n}\n.bubble-wrapper.user {\n  margin-left: auto;\n  flex-direction: row-reverse;\n}\n.bubble-wrapper.ai {\n  margin-right: auto;\n}\n\n.bubble-triangle {\n  width: 0;\n  height: 0;\n  border-style: solid;\n  margin-bottom: 6px;\n}\n.bubble-triangle.user {\n  border-width: 10px 0 10px 14px;\n  border-color: transparent transparent transparent #42b983;\n  margin-left: 6px;\n}\n.bubble-triangle.ai {\n  border-width: 10px 14px 10px 0;\n  border-color: transparent #e0eafc transparent transparent;\n  margin-right: 6px;\n}\n\nbody.dark .bubble-triangle.ai {\n  border-color: transparent #2d3642 transparent transparent;\n}\n\n.message-content {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.8) 100%);\n  border-radius: 16px;\n  padding: 16px 20px;\n  font-size: 1.1rem;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);\n  color: #2c3e50;\n  min-width: 60px;\n  word-break: break-all;\n  max-width: 100%;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  transition: all 0.3s ease;\n}\n\n.bubble-wrapper.user .message-content {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #fff;\n  text-align: right;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.bubble-wrapper.ai .message-content {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);\n  color: #2c3e50;\n  text-align: left;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n\nbody.dark .bubble-wrapper.ai .message-content {\n  background: linear-gradient(135deg, rgba(44, 62, 80, 0.95) 0%, rgba(52, 73, 94, 0.85) 100%);\n  color: #ecf0f1;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n\n.status-tag {\n  background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 8px;\n  font-size: 12px;\n  margin-right: 10px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(255, 152, 0, 0.3);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  backdrop-filter: blur(5px);\n}\n\n.score-info {\n  font-size: 14px;\n  color: #7f8c8d;\n  margin-top: 10px;\n  padding-top: 10px;\n  border-top: 1px dashed rgba(102, 126, 234, 0.2);\n  background: rgba(102, 126, 234, 0.05);\n  padding: 8px 12px;\n  border-radius: 8px;\n  backdrop-filter: blur(5px);\n}\n\nbody.dark .score-info {\n  color: #bdc3c7;\n  border-top-color: rgba(52, 152, 219, 0.2);\n  background: rgba(52, 152, 219, 0.05);\n}\n\n.input-area {\n  display: flex;\n  gap: 12px;\n  margin-top: auto;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.8) 100%);\n  border-radius: 16px;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.08);\n  padding: 16px 20px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  flex-shrink: 0;\n}\n\nbody.dark .input-area {\n  background: linear-gradient(135deg, rgba(44, 62, 80, 0.9) 0%, rgba(52, 73, 94, 0.8) 100%);\n  box-shadow: 0 4px 16px rgba(52, 152, 219, 0.12);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n}\n\n.message-input {\n  flex: 1;\n  min-height: 42px;\n  max-height: 120px;\n  padding: 12px 16px;\n  border: 1.5px solid rgba(102, 126, 234, 0.2);\n  border-radius: 12px;\n  font-size: 1.1rem;\n  background: rgba(255, 255, 255, 0.8);\n  transition: all 0.3s ease;\n  line-height: 1.6;\n  resize: none;\n  overflow-y: auto;\n  backdrop-filter: blur(10px);\n  color: #2c3e50;\n}\n\n.message-input:focus {\n  border: 1.5px solid #667eea;\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  background: rgba(255, 255, 255, 0.95);\n}\n\n.message-input:disabled {\n  background: rgba(255, 255, 255, 0.5);\n  color: #7f8c8d;\n}\n\nbody.dark .message-input {\n  background: rgba(44, 62, 80, 0.8);\n  border-color: rgba(52, 152, 219, 0.2);\n  color: #ecf0f1;\n}\n\nbody.dark .message-input:focus {\n  border-color: #3498db;\n  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);\n  background: rgba(44, 62, 80, 0.95);\n}\n\nbody.dark .message-input:disabled {\n  background: rgba(44, 62, 80, 0.5);\n  color: #95a5a6;\n}\n\n.send-btn {\n  padding: 14px 28px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 1.1rem;\n  font-weight: bold;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n  transition: all 0.3s ease;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.send-btn:hover:not(:disabled) {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a5acd 100%);\n  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);\n  transform: translateY(-1px);\n}\n\n.send-btn:disabled {\n  background: rgba(204, 204, 204, 0.8);\n  cursor: not-allowed;\n  box-shadow: none;\n  transform: none;\n}\n\nbody.dark .send-btn {\n  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);\n  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);\n}\n\nbody.dark .send-btn:hover:not(:disabled) {\n  background: linear-gradient(135deg, #2980b9 0%, #1f5f8b 100%);\n  box-shadow: 0 6px 16px rgba(52, 152, 219, 0.3);\n}\n\nbody.dark .send-btn:disabled {\n  background: rgba(74, 85, 104, 0.8);\n}\n\n@media (max-width: 768px) {\n  .intro-section {\n    margin-top: 10px;\n    max-width: 98vw;\n  }\n  .intro-card {\n    padding: 10px 2vw 8px 2vw;\n    max-width: 98vw;\n  }\n  .sim-title {\n    font-size: 1.2rem;\n  }\n  .sim-desc {\n    font-size: 0.95rem;\n  }\n  .intro-card li {\n    font-size: 0.95rem;\n    margin-bottom: 7px;\n  }\n  .start-btn {\n    width: 100%;\n    padding: 10px 0;\n    font-size: 0.98rem;\n  }\n  .game-status {\n    flex-direction: column;\n    gap: 10px;\n    padding: 12px 8px;\n  }\n  .game-dialog {\n    height: 220px;\n    padding: 8px 2px 2px 2px;\n  }\n  .bubble-wrapper {\n    max-width: 98%;\n  }\n  .input-area {\n    flex-direction: column;\n    gap: 8px;\n    padding: 8px 6px;\n  }\n  .send-btn {\n    width: 100%;\n    padding: 14px 0;\n  }\n}\n</style>","import { render } from \"./NegotiatorSimulator.vue?vue&type=template&id=9886f148&scoped=true\"\nimport script from \"./NegotiatorSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./NegotiatorSimulator.vue?vue&type=script&lang=js\"\n\nimport \"./NegotiatorSimulator.vue?vue&type=style&index=0&id=9886f148&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9886f148\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$data","gameStarted","_hoisted_4","_createElementVNode","_normalizeClass","isHeaderCollapsed","onClick","_cache","args","$options","toggleHeader","title","_hoisted_5","_hoisted_6","_hoisted_7","getTrustLevelClass","_hoisted_8","_toDisplayString","trustValue","_hoisted_9","style","_normalizeStyle","width","_hoisted_10","timeLeft","_hoisted_11","_hoisted_12","_hoisted_13","roundsLeft","_hoisted_14","_hoisted_15","_Fragment","_renderList","messages","msg","index","key","type","_hoisted_16","_hoisted_17","_hoisted_18","getAiStatus","content","_hoisted_19","getAiMessage","_hoisted_20","getScoreInfo","_hoisted_21","_hoisted_22","userInput","$event","onInput","autoResizeInput","onKeydown","handleKeydown","disabled","waitingForAI","placeholder","rows","sendMessage","_hoisted_24","_hoisted_2","_hoisted_3","startGame","name","data","timer","chatId","Date","now","sessionMessages","sessionLoading","currentChatId","methods","this","event","message","KeyboardEvent","preventDefault","trim","push","clearInterval","$nextTick","scrollToBottom","url","axios","getUri","params","prompt","response","fetch","ok","Error","body","reader","getReader","decoder","TextDecoder","aiText","aiMsgIdx","length","done","value","read","textChunk","decode","stream","parseAIResponse","fetchChatList","e","resetTimer","trustMatch","match","parseInt","roundMatch","window","confirm","resetGame","replace","split","lines","slice","join","startTimer","setInterval","handleTimeout","Promise","resolve","shiftKey","textarea","target","height","scrollHeight","messagesEl","$el","querySelector","scrollTop","beforeUnmount","__exports__","render"],"sourceRoot":""}