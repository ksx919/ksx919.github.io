{"version":3,"file":"js/562.49e838f7.js","mappings":"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","sources":["webpack://aihub/./src/views/ChatPDF.vue","webpack://aihub/./src/views/ChatPDF.vue?b5e9"],"sourcesContent":["<template>\n  <div class=\"chat-pdf-layout\">\n    <aside class=\"sidebar\">\n      <div class=\"sidebar-header\">\n        <h2>PDF聊天</h2>\n        <p class=\"subtitle\">智能文档助手</p>\n      </div>\n      <div class=\"chat-list\">\n        <div\n          v-for=\"chat in chatList\"\n          :key=\"chat.chatId\"\n          :class=\"['chat-item', chat.chatId === currentChatId ? 'active' : '']\"\n          @click=\"switchChat(chat.chatId)\"\n        >\n                  <div class=\"chat-summary\">\n          {{ chat.summary || '（空会话）' }}\n        </div>\n                  <div class=\"chat-time\">{{ formatTime(chat.createTime) }}</div>\n        </div>\n      </div>\n      <button class=\"new-chat-btn\" @click=\"newChat\">+ 新建会话</button>\n    </aside>\n\n    <main class=\"chat-main\">\n      <div class=\"chat-header\" :class=\"{ 'collapsed': isHeaderCollapsed }\">\n        <div class=\"header-content\">\n          <h1>PDF智能助手</h1>\n          <div class=\"features\">\n            <span class=\"feature-tag\">文档解析</span>\n            <span class=\"feature-tag\">内容问答</span>\n            <span class=\"feature-tag\">要点提取</span>\n            <span class=\"feature-tag\">智能总结</span>\n          </div>\n        </div>\n        <button class=\"collapse-btn\" @click=\"toggleHeader\" :title=\"isHeaderCollapsed ? '展开标题' : '收起标题'\">\n          {{ isHeaderCollapsed ? '▼' : '▲' }}\n        </button>\n      </div>\n      \n      <!-- 内容区域 -->\n      <div class=\"content-area\" v-if=\"pdfUrl\">\n        <!-- PDF查看区域 -->\n        <div class=\"pdf-viewer-container\">\n          <iframe \n            :src=\"pdfUrl\" \n            class=\"pdf-viewer\"\n            frameborder=\"0\"\n          ></iframe>\n        </div>\n\n        <!-- 聊天窗口 -->\n        <div class=\"chat-window\">\n          <!-- 聊天历史区域 -->\n          <div class=\"chat-history-area\">\n            <div class=\"messages\">\n              <div v-for=\"(msg, idx) in currentMessages\" :key=\"idx\" :class=\"['message', msg.role]\">\n                <div class=\"message-avatar\">\n                  <div v-if=\"msg.role === 'user'\" class=\"user-avatar\">👤</div>\n                  <div v-else class=\"ai-avatar\">🤖</div>\n                </div>\n                <div class=\"message-content\">\n                  <!-- 用户消息 -->\n                  <template v-if=\"msg.role === 'user'\">\n                    <div class=\"user-message\">\n                      <span class=\"text\">{{ msg.text }}</span>\n                    </div>\n                  </template>\n                  \n                  <!-- AI消息 -->\n                  <template v-else>\n                    <!-- 加载动画 -->\n                    <div v-if=\"loading && idx === currentMessages.length - 1 && !msg.text\" class=\"loading-dots\">\n                      <span class=\"dot\"></span>\n                      <span class=\"dot\"></span>\n                      <span class=\"dot\"></span>\n                    </div>\n                    \n                    <!-- 最终回复 -->\n                    <div v-if=\"msg.text\" class=\"ai-response\">\n                      <div class=\"response-text\" v-html=\"formatResponse(msg.text)\"></div>\n                    </div>\n                  </template>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 单行输入区域 -->\n          <div class=\"input-bar-container\">\n            <div class=\"input-wrapper\">\n              <textarea\n                v-model=\"input\"\n                @input=\"autoResizeInput\"\n                @keydown=\"handleKeydown\"\n                placeholder=\"请输入您的问题...\"\n                :disabled=\"loading || !pdfUrl\"\n                class=\"chat-input textarea-auto\"\n                rows=\"1\"\n                style=\"resize:none;overflow:hidden;\"\n              />\n              <div class=\"input-actions\">\n                <button \n                  @click=\"send\" \n                  :disabled=\"loading || !pdfUrl || !input.trim()\"\n                  class=\"send-btn\"\n                >\n                  <span v-if=\"loading\">发送中...</span>\n                  <span v-else>发送</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- PDF上传区域 -->\n      <div class=\"pdf-upload-area\" v-if=\"!pdfUrl\">\n        <div class=\"upload-placeholder\" @click=\"$refs.fileInput.click()\">\n          <p>点击上传PDF文件</p>\n          <p class=\"upload-hint\">支持PDF格式文件</p>\n        </div>\n        <input \n          type=\"file\" \n          ref=\"fileInput\" \n          @change=\"handleFileUpload\" \n          accept=\".pdf\"\n          style=\"display: none;\"\n        />\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport axios from 'axios'\n\nfunction genId() {\n  return 'chat_' + Date.now() + '_' + Math.random().toString(36).slice(2, 8)\n}\n\nexport default {\n  name: 'ChatPDF',\n  setup() {\n    const chatList = ref([])\n    const currentChatId = ref('')\n    const input = ref('')\n    const loading = ref(false)\n    const currentMessages = ref([])\n    const pdfUrl = ref('')\n    const currentPdfName = ref('')\n    const isHeaderCollapsed = ref(false)\n    \n    // 为每个会话维护独立的消息\n    const sessionMessages = ref({}) // { chatId: messages[] }\n    const sessionLoading = ref({}) // { chatId: boolean }\n    const sessionPdf = ref({}) // { chatId: { url, name } }\n\n    // 获取会话列表\n    const fetchChatList = async () => {\n      try {\n        const resp = await axios.get('/ai/history/pdf/with-time')\n        // {chatId: createTime} 映射\n        const chatIdsWithTime = resp.data\n        const chatListWithTitles = []\n        \n        // 为每个会话检查PDF文件并获取名称作为标题\n        for (const [chatId, createTime] of Object.entries(chatIdsWithTime)) {\n          try {\n            // 检查PDF文件是否存在\n            const fileUrl = `${axios.defaults.baseURL}/ai/pdf/file/${chatId}`;\n            const response = await fetch(fileUrl, { method: 'HEAD' });\n            let title = '（空会话）'\n            \n            if (response.ok) {\n              // 如果文件存在，使用PDF名称作为标题\n              title = `PDF_${chatId.substring(0, 8)}.pdf`\n            }\n            \n            chatListWithTitles.push({ \n              chatId, \n              summary: title,\n              createTime: createTime\n            })\n          } catch (error) {\n            // 如果检查失败，使用默认标题\n            chatListWithTitles.push({ \n              chatId, \n              summary: '（空会话）',\n              createTime: createTime\n            })\n          }\n        }\n        \n        // 按创建时间排序，最新的在前面\n        chatListWithTitles.sort((a, b) => b.createTime - a.createTime)\n        \n        chatList.value = chatListWithTitles\n        // 自动选中第一个\n        if (chatList.value.length > 0 && !currentChatId.value) {\n          currentChatId.value = chatList.value[0].chatId\n        }\n      } catch (error) {\n        console.error('获取会话列表失败:', error)\n      }\n    }\n\n    // 获取当前会话消息\n    const fetchMessages = async (chatId) => {\n      if (!chatId) return\n      try {\n        const resp = await axios.get(`/ai/history/pdf/${chatId}`)\n        // resp.data: [{role, content}]\n        // 兼容原有结构\n        const messages = resp.data.map(msg => {\n          if (msg.role === 'assistant') {\n            return { role: 'ai', text: msg.content }\n          } else {\n            return { role: 'user', text: msg.content }\n          }\n        })\n        \n        // 更新会话消息\n        sessionMessages.value[chatId] = messages\n        // 如果是当前会话，更新currentMessages\n        if (chatId === currentChatId.value) {\n          currentMessages.value = messages\n          // 滚动到底部\n          scrollToBottom()\n        }\n        \n        // 检查该会话是否有PDF文件（通过向后端发送HEAD请求检查文件是否存在）\n        try {\n          const fileUrl = `${axios.defaults.baseURL}/ai/pdf/file/${chatId}`;\n          const response = await fetch(fileUrl, { method: 'HEAD' });\n          if (response.ok) {\n            // 如果文件存在，设置PDF信息\n            const pdfInfo = {\n              url: fileUrl,\n              name: `PDF_${chatId.substring(0, 8)}.pdf`\n            };\n            sessionPdf.value[chatId] = pdfInfo;\n            if (chatId === currentChatId.value) {\n              pdfUrl.value = pdfInfo.url;\n              currentPdfName.value = pdfInfo.name;\n            }\n          }\n        } catch (fileError) {\n          // 文件检查失败，不影响消息加载\n          console.debug('检查PDF文件是否存在时出错:', fileError);\n        }\n        \n        // 如果该会话已经有PDF文件信息，加载PDF信息\n        if (sessionPdf.value[chatId]) {\n          pdfUrl.value = sessionPdf.value[chatId].url\n          currentPdfName.value = sessionPdf.value[chatId].name\n        }\n      } catch (error) {\n        console.error('获取消息失败:', error)\n      }\n    }\n\n    // 新建会话\n    const newChat = async () => {\n      const id = genId()\n      currentChatId.value = id\n      sessionMessages.value[id] = []\n      currentMessages.value = []\n      pdfUrl.value = ''\n      currentPdfName.value = ''\n      sessionPdf.value[id] = { url: '', name: '' }\n      // 不立即添加到聊天列表，等发送消息时再添加\n    }\n\n    // 切换会话\n    const switchChat = async (id) => {\n      currentChatId.value = id\n      // 如果会话消息已存在，直接使用\n      if (sessionMessages.value[id]) {\n        currentMessages.value = sessionMessages.value[id]\n        // 检查当前会话是否有PDF\n        if (sessionPdf.value[id]) {\n          pdfUrl.value = sessionPdf.value[id].url\n          currentPdfName.value = sessionPdf.value[id].name\n        } else {\n          // 如果session中没有PDF信息，尝试从后端检查文件是否存在\n          try {\n            const fileUrl = `${axios.defaults.baseURL}/ai/pdf/file/${id}`;\n            const response = await fetch(fileUrl, { method: 'HEAD' });\n            if (response.ok) {\n              // 如果文件存在，设置PDF信息\n              const pdfInfo = {\n                url: fileUrl,\n                name: `PDF_${id.substring(0, 8)}.pdf`\n              };\n              sessionPdf.value[id] = pdfInfo;\n              pdfUrl.value = pdfInfo.url;\n              currentPdfName.value = pdfInfo.name;\n              \n              // 更新聊天列表中的标题\n              const chatItem = chatList.value.find(item => item.chatId === id)\n              if (chatItem) {\n                chatItem.summary = pdfInfo.name\n              }\n            }\n          } catch (error) {\n            console.debug('检查PDF文件是否存在时出错:', error);\n          }\n        }\n        // 滚动到底部\n        scrollToBottom()\n      } else {\n        // 否则从后端获取\n        await fetchMessages(id)\n      }\n    }\n\n    // 滚动到底部函数\n    const scrollToBottom = () => {\n      setTimeout(() => {\n        const messagesEl = document.querySelector('.messages')\n        if (messagesEl) {\n          messagesEl.scrollTop = messagesEl.scrollHeight\n        }\n      }, 10)\n    }\n    \n    // 格式化时间\n    const formatTime = (timestamp) => {\n      if (timestamp) {\n        const date = new Date(timestamp)\n        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString()\n      }\n      return ''\n    }\n    \n    // 格式化响应文本\n    const formatResponse = (text) => {\n      if (!text) return ''\n      // 简单的换行符处理\n      return text.replace(/\\n/g, '<br>')\n    }\n    \n    // 切换头部收缩状态\n    const toggleHeader = () => {\n      isHeaderCollapsed.value = !isHeaderCollapsed.value\n    }\n\n    // 处理文件上传\n    const handleFileUpload = async (event) => {\n      // 确保有有效的chatId\n      if (!currentChatId.value) {\n        await newChat();\n      }\n      \n      const file = event.target.files[0]\n      if (!file || file.type !== 'application/pdf') {\n        alert('请选择PDF文件')\n        return\n      }\n      \n      // 检查文件大小，限制为100MB\n      const maxSize = 100 * 1024 * 1024; // 100MB in bytes\n      if (file.size > maxSize) {\n        alert('文件大小不能超过100MB')\n        event.target.value = '' // 清空文件输入框\n        return\n      }\n      \n      const formData = new FormData()\n      formData.append('file', file)\n      \n      try {\n        // 修改上传接口路径，与后端PdfController匹配\n        const response = await axios.post(`/ai/pdf/upload/${currentChatId.value}`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n        \n        // 修改检查逻辑，匹配后端实际返回的数据结构\n        if (response.data.ok !== 1) {\n          throw new Error(response.data.msg || '上传失败')\n        }\n        \n        // 保存PDF信息到当前会话\n        const chatId = currentChatId.value\n        // 修改文件下载路径，与后端PdfController匹配\n        // 使用完整的URL确保调用后端服务的端口(8080)\n        const pdfInfo = {\n          url: `${axios.defaults.baseURL}/ai/pdf/file/${chatId}`,\n          name: file.name\n        }\n        \n        sessionPdf.value[chatId] = pdfInfo\n        pdfUrl.value = pdfInfo.url\n        currentPdfName.value = pdfInfo.name\n        \n        // 更新聊天列表中的标题\n        const chatItem = chatList.value.find(item => item.chatId === chatId)\n        if (chatItem) {\n          chatItem.summary = file.name\n        }\n        \n        // 清空文件输入框\n        event.target.value = ''\n      } catch (error) {\n        console.error('上传PDF失败:', error)\n        alert('上传PDF失败，请重试')\n      }\n    }\n\n    // 关闭PDF查看器\n    const closePdf = () => {\n      pdfUrl.value = ''\n      currentPdfName.value = ''\n      // 从当前会话中移除PDF信息\n      const chatId = currentChatId.value\n      if (sessionPdf.value[chatId]) {\n        sessionPdf.value[chatId] = { url: '', name: '' }\n        // 更新聊天列表中的标题\n        const chatItem = chatList.value.find(item => item.chatId === chatId)\n        if (chatItem) {\n          chatItem.summary = '（空会话）'\n        }\n      }\n    }\n\n    // 发送消息\n    const send = async () => {\n      if (!input.value.trim() || loading.value || !pdfUrl.value) return\n      \n      const chatId = currentChatId.value\n      const prompt = input.value\n      input.value = ''\n      // 设置当前会话为加载状态\n      sessionLoading.value[chatId] = true\n      loading.value = true\n      \n      // 获取当前会话的消息列表\n      let messages = sessionMessages.value[chatId] || []\n      \n      // 如果是第一条消息，先添加到聊天列表\n      if (messages.length === 0) {\n        const currentTime = Date.now()\n        chatList.value.unshift({ \n          chatId: chatId, \n          summary: prompt.slice(0, 20) + (prompt.length > 20 ? '...' : ''),\n          createTime: currentTime\n        })\n      } else {\n        // 如果不是第一条消息，更新会话时间\n        const currentChat = chatList.value.find(c => c.chatId === chatId)\n        if (currentChat) {\n          currentChat.createTime = Date.now()\n        }\n      }\n      \n      // 先添加用户消息到界面\n      messages.push({ role: 'user', text: prompt })\n      sessionMessages.value[chatId] = messages\n      \n      // 立即创建一个空的AI消息，显示\"AI：\"，避免卡顿感\n      messages.push({ role: 'ai', text: '' })\n      sessionMessages.value[chatId] = messages\n      \n      // 如果是当前会话，更新currentMessages\n      if (chatId === currentChatId.value) {\n        currentMessages.value = messages\n        // 滚动到底部\n        scrollToBottom()\n      }\n      \n      // 后台处理AI回复，传递chatId参数\n      processAIResponse(chatId, prompt, messages)\n    }\n\n    // 后台处理AI回复\n    const processAIResponse = async (chatId, prompt, messages) => {\n      try {\n        // 构建请求URL（保留原有axios参数处理）\n        const url = axios.getUri({ \n          url: '/ai/pdf/chat', \n          params: { prompt, chatId }\n        });\n        \n        // 使用fetch获取流式响应 [6,8](@ref)\n        const response = await fetch(url);\n        if (!response.body) throw new Error('无流式响应');\n        \n        const reader = response.body.getReader();\n        const decoder = new TextDecoder('utf-8');\n        let aiText = '';\n        \n        // 使用临时消息索引\n        const tempMsgIdx = messages.length - 1;\n        \n        // 流式处理（修复eslint错误）[1](@ref)\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n          \n          // 直接解码字符串片段（Flux特性）[3](@ref)\n          const textChunk = decoder.decode(value, { stream: true });\n          aiText += textChunk;\n          \n          // 实时更新消息文本\n          messages[tempMsgIdx].text = aiText;\n          \n          // 更新会话消息\n          sessionMessages.value[chatId] = [...messages];\n          \n          // 当前会话处理（含滚动）\n          if (chatId === currentChatId.value) {\n            currentMessages.value = [...messages];\n            scrollToBottom();\n          }\n        }\n        \n        // 最终更新会话列表以获取最新的时间\n        await fetchChatList();\n      } catch (e) {\n        const errorMsgIdx = messages.length - 1;\n        messages[errorMsgIdx] = { \n          role: 'ai', \n          text: `[AI异常] ${e.message || '未知错误'}`\n        };\n        sessionMessages.value[chatId] = [...messages];\n        if (chatId === currentChatId.value) {\n          currentMessages.value = [...messages];\n          scrollToBottom();\n        }\n      } finally {\n        // 清理加载状态\n        sessionLoading.value[chatId] = false;\n        if (chatId === currentChatId.value) {\n          loading.value = false;\n        }\n      }\n    }\n\n    // 处理键盘事件\n    const handleKeydown = (e) => {\n      if (e.key === 'Enter') {\n        if (e.shiftKey) {\n          // Shift+Enter: 换行\n          return;\n        } else {\n          // Enter: 发送消息\n          e.preventDefault();\n          send();\n        }\n      }\n    };\n\n    // 自动调整输入框高度\n    const autoResizeInput = (e) => {\n      const textarea = e.target;\n      textarea.style.height = 'auto';\n      textarea.style.height = textarea.scrollHeight + 'px';\n    };\n\n    // 初始化加载\n    onMounted(async () => {\n      await fetchChatList()\n      if (currentChatId.value) {\n        await fetchMessages(currentChatId.value)\n      }\n    })\n\n    return {\n      chatList,\n      currentChatId,\n      currentMessages,\n      input,\n      send,\n      newChat,\n      switchChat,\n      loading,\n      pdfUrl,\n      currentPdfName,\n      handleFileUpload,\n      closePdf,\n      autoResizeInput,\n      formatTime,\n      formatResponse,\n      isHeaderCollapsed,\n      toggleHeader,\n      handleKeydown\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 布局基本样式 */\n.chat-pdf-layout {\n  display: flex;\n  height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  transition: all 0.3s ease;\n}\n\nbody.dark .chat-pdf-layout {\n  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);\n}\n\n/* 侧边栏样式 */\n.sidebar {\n  width: 300px;\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);\n  backdrop-filter: blur(15px);\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  display: flex;\n  flex-direction: column;\n  transition: all 0.3s ease;\n  box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);\n}\n\nbody.dark .sidebar {\n  background: linear-gradient(180deg, rgba(44, 62, 80, 0.9) 0%, rgba(52, 73, 94, 0.7) 100%);\n  border-right: 1px solid rgba(255, 255, 255, 0.15);\n  box-shadow: 2px 0 20px rgba(0, 0, 0, 0.3);\n}\n\n.sidebar-header {\n  padding: 25px 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n  position: relative;\n}\n\n.sidebar-header::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: linear-gradient(90deg, #667eea, #764ba2);\n  opacity: 0.6;\n}\n\n.sidebar-header h2 {\n  margin: 0 0 8px 0;\n  color: #2c3e50;\n  font-size: 20px;\n  font-weight: 700;\n  transition: color 0.3s ease;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.subtitle {\n  margin: 0;\n  color: #7f8c8d;\n  font-size: 13px;\n  transition: color 0.3s ease;\n  font-weight: 500;\n}\n\nbody.dark .sidebar-header {\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n  background: linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(52, 73, 94, 0.1) 100%);\n}\n\nbody.dark .sidebar-header::before {\n  background: linear-gradient(90deg, #3498db, #2980b9);\n}\n\nbody.dark .sidebar-header h2 {\n  color: #ecf0f1;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n}\n\nbody.dark .subtitle {\n  color: #bdc3c7;\n}\n\n.chat-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 15px;\n}\n\n.chat-item {\n  padding: 15px;\n  margin-bottom: 10px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: rgba(255, 255, 255, 0.8);\n  color: #2c3e50;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n\n.chat-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 3px;\n  height: 100%;\n  background: linear-gradient(180deg, #667eea, #764ba2);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.chat-item:hover {\n  background: rgba(255, 255, 255, 0.95);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: rgba(102, 126, 234, 0.3);\n}\n\n.chat-item:hover::before {\n  opacity: 1;\n}\n\n.chat-item.active {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.chat-item.active::before {\n  opacity: 1;\n  background: rgba(255, 255, 255, 0.3);\n}\n\nbody.dark .chat-item {\n  background: rgba(44, 62, 80, 0.8);\n  color: #ecf0f1;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\nbody.dark .chat-item:hover {\n  background: rgba(44, 62, 80, 0.95);\n  border-color: rgba(52, 152, 219, 0.3);\n}\n\nbody.dark .chat-item.active {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);\n}\n\n.chat-summary {\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chat-time {\n  font-size: 11px;\n  opacity: 0.7;\n  transition: opacity 0.3s ease;\n}\n\nbody.dark .chat-time {\n  opacity: 0.5;\n}\n\n.new-chat-btn {\n  margin: 15px;\n  padding: 14px 16px;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 14px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n\n.new-chat-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.new-chat-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);\n}\n\n.new-chat-btn:hover::before {\n  left: 100%;\n}\n\nbody.dark .new-chat-btn {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);\n}\n\nbody.dark .new-chat-btn:hover {\n  box-shadow: 0 6px 16px rgba(52, 152, 219, 0.4);\n}\n\n/* 主区域样式 */\n.chat-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n}\n\nbody.dark .chat-main {\n  background: rgba(44, 62, 80, 0.95);\n}\n\n.chat-header {\n  padding: 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  text-align: center;\n  transition: all 0.3s ease;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.chat-header.collapsed {\n  padding: 5px 20px;\n  min-height: 10px;\n  max-height: 40px;\n}\n\n.header-content {\n  flex: 1;\n  text-align: center;\n  transition: all 0.3s ease;\n  overflow: hidden;\n  max-height: 200px;\n}\n\n.chat-header.collapsed .header-content {\n  opacity: 0;\n  max-height: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.collapse-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  color: #667eea;\n  padding: 8px;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n}\n\n.collapse-btn:hover {\n  background: rgba(102, 126, 234, 0.1);\n  transform: translateY(-50%) scale(1.1);\n}\n\nbody.dark .collapse-btn {\n  color: #3498db;\n}\n\nbody.dark .collapse-btn:hover {\n  background: rgba(52, 152, 219, 0.2);\n}\n\n.chat-header h1 {\n  margin: 0 0 10px 0;\n  color: #333;\n  font-size: 24px;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.features {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.feature-tag {\n  padding: 4px 12px;\n  background: #667eea;\n  color: white;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\nbody.dark .chat-header {\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\nbody.dark .chat-header h1 {\n  color: #ecf0f1;\n}\n\nbody.dark .feature-tag {\n  background: #3498db;\n}\n\n/* 内容区域 */\n.content-area {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  overflow: hidden;\n  min-height: 0;\n}\n\n/* PDF查看容器 */\n.pdf-viewer-container {\n  width: 40%;\n  min-height: 0;\n  background: #f0f0f0;\n  border-right: 1px solid #ddd;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\nbody.dark .pdf-viewer-container {\n  background: #2d3642;\n  border-right: 1px solid #444;\n}\n\n\n\n.pdf-viewer {\n  flex: 1;\n  width: 100%;\n  min-height: 0;\n  border: none;\n}\n\n/* PDF上传区域 */\n.pdf-upload-area {\n  width: 100%;\n  height: 100%;\n  background: #f8f9fa;\n  border-right: 1px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n}\n\nbody.dark .pdf-upload-area {\n  background: #2d3642;\n  border-right: 1px solid #444;\n}\n\n.upload-placeholder {\n  text-align: center;\n  padding: 30px;\n  border: 2px dashed #ccc;\n  border-radius: 8px;\n  cursor: pointer;\n  width: 80%;\n}\n\nbody.dark .upload-placeholder {\n  border: 2px dashed #444;\n}\n\n.upload-placeholder:hover {\n  border-color: #42b983;\n}\n\n.upload-hint {\n  font-size: 0.9rem;\n  color: #666;\n  margin-top: 10px;\n}\n\nbody.dark .upload-hint {\n  color: #aaa;\n}\n\n/* 聊天窗口样式 */\n.chat-window {\n  width: 60%;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n  flex: 1;\n}\n\nbody.dark .chat-window {\n  background: rgba(44, 62, 80, 0.95);\n}\n\n/* 消息样式 */\n.messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.message {\n  display: flex;\n  gap: 12px;\n  max-width: 80%;\n}\n\n.message.user {\n  align-self: flex-end;\n  flex-direction: row-reverse;\n}\n\n.message.assistant {\n  align-self: flex-start;\n}\n\n.message-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  flex-shrink: 0;\n}\n\n.user-avatar {\n  background: #667eea;\n  color: white;\n}\n\n.ai-avatar {\n  background: #764ba2;\n  color: white;\n}\n\n.message-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-message {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 12px 16px;\n  border-radius: 18px 18px 4px 18px;\n  word-wrap: break-word;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  font-weight: 500;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  min-width: fit-content;\n  white-space: nowrap;\n}\n\n.ai-response {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);\n  border: 1px solid rgba(102, 126, 234, 0.15);\n  padding: 16px;\n  border-radius: 18px 18px 18px 4px;\n  word-wrap: break-word;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  color: #2c3e50;\n  backdrop-filter: blur(10px);\n}\n\nbody.dark .ai-response {\n  background: linear-gradient(135deg, rgba(44, 62, 80, 0.95) 0%, rgba(52, 73, 94, 0.85) 100%);\n  border: 1px solid rgba(52, 152, 219, 0.15);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  color: #ecf0f1;\n}\n\n/* 聊天历史区域 */\n.chat-history-area {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  min-height: 0;\n}\n\n\n\n.messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  min-height: 0;\n}\n\n.message {\n  margin-bottom: 12px;\n  display: flex;\n  align-items: flex-start;\n}\n\n/* 消息角色标识 */\n.message.user {\n  flex-direction: row-reverse;\n  text-align: right;\n}\n\n.message.user .role {\n  color: #42b983;\n  margin-left: 8px;\n}\n\n.message.ai .role {\n  color: #e67e22;\n  margin-right: 8px;\n}\n\n.message-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 用户消息样式 */\n.user-message {\n  display: inline-block;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border-radius: 12px;\n  padding: 12px 16px;\n  max-width: 80%;\n  min-width: fit-content;\n  text-align: right;\n  margin-left: auto;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  font-weight: 500;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  white-space: nowrap;\n}\n\nbody.dark .user-message {\n  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);\n  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n}\n\n/* AI消息样式 */\n.ai-response {\n  display: inline-block;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);\n  border-radius: 12px;\n  padding: 12px 16px;\n  max-width: 80%;\n  min-width: fit-content;\n  text-align: left;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  color: #2c3e50;\n  border: 1px solid rgba(102, 126, 234, 0.15);\n  backdrop-filter: blur(10px);\n}\n\nbody.dark .ai-response {\n  background: linear-gradient(135deg, rgba(44, 62, 80, 0.95) 0%, rgba(52, 73, 94, 0.85) 100%);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  color: #ecf0f1;\n  border: 1px solid rgba(52, 152, 219, 0.15);\n}\n\n/* 单行输入区域 */\n.input-bar-container {\n  padding: 20px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  background: rgba(255, 255, 255, 0.9);\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\nbody.dark .input-bar-container {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  background: rgba(44, 62, 80, 0.9);\n}\n\n.input-wrapper {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.chat-input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 2px solid #e9ecef;\n  border-radius: 25px;\n  font-size: 14px;\n  outline: none;\n  transition: all 0.3s ease;\n  max-height: 120px;\n  min-height: 48px;\n  background: white;\n  color: #333;\n  resize: none;\n  overflow-y: auto;\n}\n\n.chat-input:focus {\n  border-color: #667eea;\n}\n\n.chat-input:disabled {\n  background: #f8f9fa;\n  cursor: not-allowed;\n}\n\nbody.dark .chat-input {\n  background: #34495e;\n  border-color: #2c3e50;\n  color: #ecf0f1;\n}\n\nbody.dark .chat-input:focus {\n  border-color: #3498db;\n}\n\nbody.dark .chat-input:disabled {\n  background: #2c3e50;\n  color: #95a5a6;\n}\n\n.send-btn {\n  padding: 12px 24px;\n  background: #667eea;\n  color: white;\n  border: none;\n  border-radius: 25px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n}\n\n.send-btn:hover:not(:disabled) {\n  background: #5a6fd8;\n  transform: translateY(-1px);\n}\n\n.send-btn:disabled {\n  background: #ccc;\n  cursor: not-allowed;\n  transform: none;\n}\n\nbody.dark .send-btn {\n  background: #3498db;\n}\n\nbody.dark .send-btn:hover:not(:disabled) {\n  background: #2980b9;\n}\n\nbody.dark .send-btn:disabled {\n  background: #7f8c8d;\n}\n\n/* 加载动画 */\n.loading-dots {\n  display: inline-flex;\n  align-items: center;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  padding: 12px 16px;\n  margin-bottom: 12px;\n  max-width: 80px;\n}\n\nbody.dark .loading-dots {\n  background-color: #1a2633;\n}\n\n.loading-dots .dot {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: #e67e22;\n  margin: 0 4px;\n  animation: bounce 1.4s infinite ease-in-out both;\n}\n\n.loading-dots .dot:nth-child(1) {\n  animation-delay: -0.32s;\n}\n\n.loading-dots .dot:nth-child(2) {\n  animation-delay: -0.16s;\n}\n\n@keyframes bounce {\n  0%, 80%, 100% { \n    transform: scale(0);\n    opacity: 0.6;\n  }\n  40% { \n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n/* 响应文本样式 */\n.response-text {\n  line-height: 1.6;\n}\n</style>","import { render } from \"./ChatPDF.vue?vue&type=template&id=96ab436c&scoped=true\"\nimport script from \"./ChatPDF.vue?vue&type=script&lang=js\"\nexport * from \"./ChatPDF.vue?vue&type=script&lang=js\"\n\nimport \"./ChatPDF.vue?vue&type=style&index=0&id=96ab436c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-96ab436c\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","chatList","chat","key","chatId","_normalizeClass","currentChatId","onClick","$event","switchChat","_hoisted_5","_toDisplayString","summary","_hoisted_6","formatTime","createTime","_cache","args","newChat","_hoisted_7","isHeaderCollapsed","toggleHeader","title","_hoisted_8","pdfUrl","_hoisted_9","_hoisted_10","src","frameborder","_hoisted_12","_hoisted_13","_hoisted_14","currentMessages","msg","idx","role","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","text","loading","length","_hoisted_21","_hoisted_22","innerHTML","formatResponse","_hoisted_24","_hoisted_25","input","onInput","autoResizeInput","onKeydown","handleKeydown","placeholder","disabled","rows","style","_hoisted_27","send","trim","_hoisted_29","_hoisted_30","_hoisted_31","_ctx","$refs","fileInput","click","type","ref","onChange","handleFileUpload","accept","genId","Date","now","Math","random","toString","slice","name","setup","currentPdfName","sessionMessages","sessionLoading","sessionPdf","fetchChatList","async","resp","axios","get","chatIdsWithTime","data","chatListWithTitles","Object","entries","fileUrl","defaults","baseURL","response","fetch","method","ok","substring","push","error","sort","a","b","value","console","fetchMessages","messages","map","content","scrollToBottom","pdfInfo","url","fileError","debug","id","chatItem","find","item","setTimeout","messagesEl","document","querySelector","scrollTop","scrollHeight","timestamp","date","toLocaleDateString","toLocaleTimeString","replace","file","event","target","files","alert","maxSize","size","formData","FormData","append","post","headers","Error","closePdf","prompt","currentTime","unshift","currentChat","c","processAIResponse","getUri","params","body","reader","getReader","decoder","TextDecoder","aiText","tempMsgIdx","done","read","textChunk","decode","stream","e","errorMsgIdx","message","shiftKey","preventDefault","textarea","height","onMounted","__exports__","render"],"sourceRoot":""}